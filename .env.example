# ===================================================================
# AWS IoT Defender PoC Project - Environment Variables Configuration
# ===================================================================
# Copy this file to .env and modify values as needed for your environment.
# NOTE: Never commit .env files containing real credentials to version control!

# ===================================================================
# AWS Configuration
# ===================================================================
# AWS region for all services
AWS_REGION=us-east-1

# AWS profile to use (optional - uses default if not set)
# AWS_PROFILE=default

# AWS endpoint URL for local testing with LocalStack (optional)
# AWS_ENDPOINT_URL=http://localhost:4566

# ===================================================================
# IoT Device Configuration
# ===================================================================
# Base directory for certificates and keys
IOT_CERT_DIR=certs

# Certificate file names (within the device-specific subdirectory)
IOT_CERT_FILENAME=device.pem.crt
IOT_KEY_FILENAME=private.pem.key
IOT_CA_FILENAME=AmazonRootCA1.pem
IOT_ENDPOINT_FILENAME=endpoint.txt

# MQTT Connection settings
IOT_INTERVAL=10
IOT_QOS=1
IOT_RETAIN=false
IOT_CLEAN_SESSION=false
IOT_KEEP_ALIVE_SECS=30

# Topic patterns (use {client_id} placeholder)
IOT_TOPIC_PATTERN=devices/{client_id}
IOT_UNAUTH_TOPIC_PATTERN=bad/{client_id}/oops

# Performance tuning
IOT_SLEEP_GRANULARITY=0.25

# ===================================================================
# Device Defender Test Configuration
# ===================================================================
# Enable various behaviors to trigger Device Defender alerts
IOT_CAUSE_AUTH_FAIL=false
IOT_BURST_COUNT=0
IOT_BURST_INTERVAL_MS=0
IOT_PAYLOAD_BYTES=0
IOT_FLAP_INTERVAL=0
IOT_NO_HEARTBEAT=false
IOT_AFTER=0

# Invalid certificate testing for aws:num-auth-failures
IOT_INVALID_CERT_ATTEMPTS=3
IOT_INVALID_CERT_DELAY=5

# ===================================================================
# Device Defender Security Profile Configuration
# ===================================================================
# Names for Defender resources
DEFENDER_PROFILE_NAME=Example-Strict
DEFENDER_GROUP_NAME=ExampleGroup

# Behavior thresholds - adjust these to make alerts more/less sensitive
DEFENDER_AUTH_FAILURE_THRESHOLD=1
DEFENDER_MESSAGE_COUNT_THRESHOLD=10
DEFENDER_PAYLOAD_SIZE_THRESHOLD=4096
DEFENDER_DISCONNECT_THRESHOLD=2
DEFENDER_DURATION_SECONDS=300

# ===================================================================
# Provisioning Configuration
# ===================================================================
# Policy name prefix (will append _{thing_name})
IOT_POLICY_PREFIX=DevicePolicy

# Root CA download configuration
ROOT_CA_URL=https://www.amazontrust.com/repository/AmazonRootCA1.pem
DOWNLOAD_TIMEOUT=30

# ===================================================================
# Environment-specific Settings
# ===================================================================
# Uncomment and modify for different environments:

# Development environment
# DEFENDER_PROFILE_NAME=Example-Dev
# DEFENDER_GROUP_NAME=Example-Dev
# IOT_INTERVAL=5

# Staging environment
# DEFENDER_PROFILE_NAME=Example-Staging
# DEFENDER_GROUP_NAME=Example-Staging
# IOT_INTERVAL=30

# Production environment
# DEFENDER_PROFILE_NAME=Example-Prod
# DEFENDER_GROUP_NAME=Example-Prod
# IOT_INTERVAL=60
# DEFENDER_AUTH_FAILURE_THRESHOLD=3
# DEFENDER_MESSAGE_COUNT_THRESHOLD=50
